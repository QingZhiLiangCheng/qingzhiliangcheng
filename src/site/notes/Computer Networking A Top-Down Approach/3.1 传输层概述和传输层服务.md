---
{"created":"2025-12-01T20:23","updated":"2026-02-06T13:26","dg-publish":true,"permalink":"/Computer Networking A Top-Down Approach/3.1 传输层概述和传输层服务/","dgPassFrontmatter":true,"noteIcon":""}
---

传输层向上层提供的服务是为运行在不同主机上的应用进程之间提供以Message(报文) 为单位的逻辑通讯的服务 -- 简单来说就是应用进程能够把报文逻辑的发送给对方，但在物理上实际上是通过层间接口传给下层的传输层，在下层的相互配合的情况下 传输的
具体来说，TCP或者UDP拿到上层交下来的报文，如果报文比较长，会把这个报文分解成若干个报文段，加上头部，以段为单位形成传输层的PDU；同样对方拿到这些报文段后，会排序成报文传给应用进程。 但TCP向上层提供的服务是字节流的服务，保证流是正常的，不保证报文的界限。应用层需要自己的应用协议来标识哪里是报文的开始，哪里是报文的结束。
![Pasted image 20251201211405.png|300](/img/user/accessory/Pasted%20image%2020251201211405.png)
> [!note]
> 运输层协议是在端系统中实现的，不是在路由器中实现的。 -- 网络路由器仅作用于该数据报的网络层字段；即他们不检查封装在该数据报的运输层报文段的字段！


一般传输层提供的协议有两种，一个是TCP协议，一个是UDP协议；下层网络层都是IP
传输层 vs. 网络层
网络层提供的是主机到主机的服务
传输层是将网络层说提供的这种主机到主机的服务，细分成了进程到进程的服务
传输层向上层提供的服务，依赖于网络层向上层提供的服务，但同时加强了网络层提供的服务以向上层提供更好的服务
做了哪些加强？
网络层所提供的服务是可能丢失的，也可能乱序，也可能延迟；其中可靠性，安全性是可以借助传输层加强的，比如在TCP上层可以加一个SSL(安全套接字层）加强安全性，但像延迟和带宽这样的是没法通过传输层加强的
> [!note]
> 上面这个延迟和带宽这个问题，是在原书第二章讲过的，其实就是2.1.3提到的一个运输层协议能够为应用程序提供的服务：可靠数据传输，吞吐量(其实就是这里的带宽)，定时(其实就是这里的延迟)，和安全性
> 并且在2.1.4也明确说明了不管是TCP还是UDP，都没有对吞吐量和定时的保证


传输层向上层提供的一个重要的功能就是复用解复用。将主机到主机加强到进程到进程，在原端多个引用进程将各自的数据都通过一个传输层连接传出去叫复用，在目标端从众多混合数据中挑出来精准发给上层应用进程叫解复用，这也是网络层不具备，传输层加强的部分。 -- 实际上就像在A家的3个人给B家的10个人传信放到了一个包裹中邮过去

TCP提供的服务是可靠的保序的传输，提供了多复用解复用，同时通了流量控制，拥塞控制，连接管理 这在[[Computer Networking A Top-Down Approach/1.2 网络边缘\|1.2 网络边缘]]和[[Computer Networking A Top-Down Approach/2.1 应用层协议原理\|2.1 应用层协议原理]]中提到过
UDP是不可靠，不保序的传输，提供了多路复用解复用，没有尽力而为的为IP服务添加更多的额外服务
UDP和TCP都没有提供宽带保障和延迟保障

> [!note]
> 这里整理一下前面课程，以及原书说的
> TCP提供了可靠数据传输，所谓可靠是指：不出错，不乱序，不重复，不丢失，提供可靠数据传输的方式主要是通过流量控制，序号，确认，计时器这样的机制；TCP还提供了多路复用和解复用；TCP还提供了拥塞控制：所谓的拥塞控制，就是力求为每个拥塞网络的链路的连接平等的共享网络链路带宽
> 但是原书中说UDP只是在尽力而为的IP上面提供了 所路复用和解复用和差错检测！ **注意差错检测这个点老师讲的时候没有提到**，我的理解是：UDP能检测出错误来，但是不重传，直接丢弃！

