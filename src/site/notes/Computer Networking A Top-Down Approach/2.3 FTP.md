---
{"created":"2025-11-05T17:19","updated":"2025-11-05T20:08","dg-publish":true,"permalink":"/Computer Networking A Top-Down Approach/2.3 FTP/","dgPassFrontmatter":true,"noteIcon":""}
---

FTP: 文件传输协议
![Pasted image 20251105172216.png|500](/img/user/accessory/Pasted%20image%2020251105172216.png)
现在分享文件都通过迅雷，百度网盘；但以前分享文件用的是FTP的服务器和FTP的客户端。可以把想要分享的文件通过FTP客户端上传到FTP的服务器上，如果有人想下载可以通过FTP客户端访问进行下载
FTP协议是干什么用的？ -- Upload 和 Download，可以通过客户端将文件上传到服务器的相应的目录下；也能把服务器的相应目录下的一些文件下载到本地
一般FTP服务器都守候在21号端口，等待用户建立连接。
一旦控制连接建立起来，首先进行用户认证(FTP这种古老的协议的用户认证的用户名和口令是名文传输)，客户端就可以向服务器发送一些指令，比如list，进入目录，upload, download...
**控制连接和数据连接分开**
当收到一个文件传输的命令后，服务器会主动的跟客户端的20号端口建立 TCP数据连接 进行传输数据和文件

换句话说，就是FTP的控制信息，比如用户认证，指令的传输都是在控制连接上传输；数据和文件的传输都在数据连接中传输
其中，控制连接叫做带外；数据连接叫做带内的传输

HTTP的数据，命令等 都是在一个连接上传输的

**FTP是一个有状态的协议**
前面介绍过的HTTP是个无状态的协议，需要通过socket等一系列机制把它变成一种有状态的协议
FTP是一个有状态的协议，服务器要维护客户端状态，服务器要维护客户端是谁，当前用户在哪一层目录

**控制连接上的指令**
ASCII码文本的方式传输
![Pasted image 20251105174418.png|500](/img/user/accessory/Pasted%20image%2020251105174418.png)
上载和下载是通过客户端的角度说的