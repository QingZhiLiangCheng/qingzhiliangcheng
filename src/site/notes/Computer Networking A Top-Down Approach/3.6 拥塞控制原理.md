---
{"created":"2026-01-02T15:31","updated":"2026-01-02T20:34","dg-publish":true,"permalink":"/Computer Networking A Top-Down Approach/3.6 拥塞控制原理/","dgPassFrontmatter":true,"noteIcon":""}
---

### Overview
对于拥塞并没有一个非常严格的定义，大致就是说 太多的数据需要网络传输，超过了网络的处理能力
拥塞控制与流量控制不同，流量控制是发送方与接收方之间的事情，拥塞控制是发送方与网络之间的事情
具体的表现有分组丢失(路由器缓冲区溢出)和分组长延迟(在路由器队列中排队)
### 阻塞的原因/代价
**拥塞的原因/代价：场景1**
![Pasted image 20260102204748.png|400](/img/user/accessory/Pasted%20image%2020260102204748.png)
路由器有无限的缓冲，链路带宽为R
从吞吐量的角度来看，$\lambda_{in}$ 只能增长到R/2, 就没法增长了
从延迟的角度看，$\lambda_{in}$越接近R/2, 流量强度越接近于1，延迟越接近于无穷大
![Pasted image 20260102205106.png|300](/img/user/accessory/Pasted%20image%2020260102205106.png)
无限的缓冲意味着分组不会丢失，都背存在了无限的缓冲中
发送端存在超时重传机制，实际上的$\lambda'_{in}$(原始数据+重传数据)>$\lambda_{in}$
**拥塞的原因/代价: 场景2**
路由器有有限的缓冲区
一种理想化的状况是，发送端有着完美的信息。
比如发送端知道什么时候路由器的缓冲区是有空闲的，这样是不会有丢失的，只有在缓冲区可用时才发送,$\lambda'_{in}=\lambda_{in}$
但路由器让所有的主机知道自己的缓冲区大小是不切实际的，那就一定会有丢失或者超时的一定要重传，$\lambda'_{in} > \lambda_{in}$,而且随着流量强度越接近于1，$\lambda'_{in}$中超时重发的比例也就越来越多，意味着有效的蹦出$\lambda_{out}$也越来越少
![Pasted image 20260102210029.png|300](/img/user/accessory/Pasted%20image%2020260102210029.png)
这就意味着拥塞带来的代价是为了输出1，往网络中泵入的压力大于1
另外的一个代价是，有一些分组在路由器中延迟比较大但并没有丢，但又启动了重传机制，属于是一些没不要的重传

**拥塞的原因/代价：场景3**
![Pasted image 20260102211437.png|500](/img/user/accessory/Pasted%20image%2020260102211437.png)
在最上面的一个路由器中，如果缓冲区有空闲，会被红色挤走，因为蓝色流量已经背过滤一条了，这样蓝色的吞吐量->0
上游传输能力会被浪费掉
![Pasted image 20260102212653.png|300](/img/user/accessory/Pasted%20image%2020260102212653.png)
可能会出现死锁的情况，甚至没有任何输出，阴影的部分都叫网络的拥塞。如果不适当的控制，会导致情况越来越差
### 拥塞控制方法
常用的拥塞控制方法有两种，一种是端到端的拥塞控制，一种叫网络辅助的拥塞控制
所谓的网络辅助的阻塞控制，就是网络核心会提供一些有没有发生拥塞的信息给端系统，端系统通过信息决定发送的速率
所谓的端到端的拥塞控制，就是网络核心不会提供显式的信息，纯靠端系统自己的感知 -- TCP属于这种情况，TCP需要靠自己的感知，比如很多段超时，或者有三个冗余的ACK来判断是否发生了拥塞，什么等级的拥塞
拥塞控制方法的目的并不是不发生网络拥塞，而是在不发生网络拥塞的情况下，尽可能的提高发送速率
**有网络辅助信息的拥塞控制: ATM ABR拥塞控制**
在ATM网络中，一个传输的单元叫做信元，53个字节，比分组小，比线路交换(存储转发1bit)大
ABR是ATM网络中的一种模式，叫“弹性服务”；所谓的弹性服务是说，如果路径是“轻载”，就能尽可能使用所有可用的带宽；如果路径拥塞了，使用的带宽会在一个最小保障的速率上
ATM的信元有两种，一种是数据信元，间或在数据信元中有一些资源信元，资源信元中有一些有关网络是否拥塞的一些标志位
网络核心在存储转发时，路由器和交换机会根据网络的拥塞程度，对一些标志位置位，比如NI bit(no increase in rate)表示轻微拥塞-速率不要增加了 
源主机发送的信元到达目标主机再反转回来，这样源主机就知道了网络中的拥塞程度
![Pasted image 20260102214305.png|500](/img/user/accessory/Pasted%20image%2020260102214305.png)
还有一个字段叫做ER(explicit rate), 交换设备会把我能提供多少兆带宽的那个值写在这里，走一圈会得到一个最小值


